<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="styles.css" />
  </head>

  <script type="module">
    import { WebPush } from "./WebPush.js";
    
    window.onload = () => {
        btnSubscribe.onclick = () => {
            WebPush.subscribe();
        };
        btnUnsubscribe.onclick = () => {
            WebPush.unsubscribe();
        };
        btnTest.onclick = async evt => {
            const data = {
                title: "webpush test",
                body: "本文本文...........",
                url: "https://fukuno.jig.jp/3093",
                timeout: 5000, // 通知を消すまでの長さ msec （デフォルト0:消さない）
                delay: 1000, // 表示するまでの時間 msec（デフォルト0）
            };
            console.log(await WebPush.push(data));
        };
        btnLocal.onclick = () => {
            const title = "見出し";
            const options = {
                body : "本文",
                // icon : "アイコン画像のパス",
                data : {
                    foo : "任意のデータ"
                }
            };
            const notification = new Notification(title, options);
        };
    };
    </script>
    

  <body>
    <img class="title-img" src="img/jig_intern.png" />

    <h1>API 接続テスト</h1>
    <p>server.ts で定義した API にアクセスします</p>

    <h2>/api/time</h2>
    <button id="timeButton">現在の日時</button>

    <h2>/api/asmd</h2>
    <label for="xNumber">x</label>
    <input id="xNumber" type="number" value="10" />
    <label for="yNumber">y</label>
    <input id="yNumber" type="number" value="5" />
    <button id="asmdButton">計算</button>
    <p id="asmdResult"></p>

    <h2>/api/reverse</h2>
    <input
      id="reverseInput"
      type="text"
      placeholder="反転する文字列"
      value="こんにちは"
    />
    <button id="reverseButton">反転</button>

    <h2>/api/todo/</h2>
    <input id="todoInput" type="text" placeholder="ToDo" />
    <button id="todoAddButton">Add</button>
    <ul id="todoList"></ul>

    <script type="module" src="main.js"></script>

    <button id="btnSubscribe">通知受信登録</button>
    <button id="btnUnsubscribe">通知受信登録解除</button>
    <button id="btnTest">プッシュ通知テスト</button>
    <button id="btnLocal">ローカル通知テスト</button>

  </body>
</html>
